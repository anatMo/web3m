<!DOCTYPE html>
<html>
<head>
    <title>Tools Page</title>
</head>
<body>
    <h1>Enter a contract address:</h1>
    <form id="addressForm">
        <input type="text" id="contractAddress" placeholder="Enter a contract address in uppercase">
        <input type="button" value="Get Data" onclick="getInfo()">
    </form>

    <div id="resultContainer">
        <!-- The results will be shown here -->
    </div>

    <script>
        function getInfo() {
            var inputAddress = document.getElementById('contractAddress').value;
            var selectedAddress = inputAddress.trim().toLowerCase(); // Convert to lowercase
            fetch('/get_info', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    address: selectedAddress
                })
            })
            .then(response => response.json())
            .then(data => {
                var resultContainer = document.getElementById('resultContainer');
                resultContainer.innerHTML = '';

                if (data.status === 'success') {
                    var resultList = data.result;
                    if (resultList.length > 0) {
                        var resultHTML = '<h2>Contract Data:</h2>';
                        resultHTML += '<ul>';
                        resultList.forEach(function(item) {
                            resultHTML += '<li>Block Number: ' + item.blockNumber + ', TimeStamp: ' + item.timeStamp + ', Gas Fee (USD): ' + item.gasFeeUSD.toFixed(4) + '</li>';
                        });
                        resultHTML += '</ul>';
                        resultContainer.innerHTML = resultHTML;
                    } else {
                        resultContainer.innerHTML = '<p>No transactions found.</p>';
                    }
                } else {
                    resultContainer.innerHTML = '<p>Error: ' + data.message + '</p>';
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
